:root{
  --bg:#0b0f14; --fg:#e6f1ff; --muted:#7b8ba5; --accent:#49d991;
  --hp:#ff5773; --xp:#47a3ff; --card:#111826cc; --shadow:rgba(0,0,0,.35);
}
html,body{height:100%}
body{margin:0;background:var(--bg);color:var(--fg);font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;overflow:hidden}

/* Canvas */
#game{position:fixed;inset:0;display:block;
  background:radial-gradient(1200px 1200px at 50% 60%, #0e1622 0%, #0b0f14 50%, #0a0d12 100%);
}

/* HUD (top infos + msg) */
#hud{position:fixed;inset:12px 12px auto 12px;display:flex;flex-direction:column;gap:8px;pointer-events:none;z-index:4}
#stats{display:flex;gap:10px;align-items:center;font-weight:600;color:var(--muted);text-shadow:0 2px 12px rgba(0,0,0,.4)}
#stats b{color:var(--fg)}
#centerMsg{position:fixed;inset:auto 0 15% 0;text-align:center;font-size:clamp(18px,3vw,28px);opacity:.9;z-index:4;text-shadow:0 6px 28px rgba(0,0,0,.6)}
/* esconder barras antigas do topo */
#hud .bar{display:none}

/* Botões base (usados em menus/ESC) */
.btn{pointer-events:auto;user-select:none;cursor:pointer;border:none;padding:10px 12px;border-radius:14px;background:#0f172acc;color:var(--fg);font-weight:700;letter-spacing:.3px;box-shadow:0 8px 24px var(--shadow)}
.btn:hover{filter:brightness(1.15)}

/* Menus / ESC */
.menu{position:fixed;inset:0;display:none;place-items:center;background:rgba(6,9,14,.8);backdrop-filter:blur(6px);z-index:12}
.panel{background:var(--card);border:1px solid #1f2937;border-radius:20px;box-shadow:0 24px 80px var(--shadow);padding:22px}
.panel h1{margin:0 0 8px;font-size:clamp(22px,3.5vw,36px)}
.panel p{margin:0 0 16px;color:var(--muted)}
.menu-actions{display:flex;gap:10px;flex-wrap:wrap}
.menu .btn{background:#0f172a;color:var(--fg);border:1px solid #1f2937}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:12px;margin-top:10px}
.itemCard{background:#0e1622;border:1px solid #223047;border-radius:16px;padding:12px;cursor:pointer;transition:transform .08s ease}
.itemCard:hover{transform:translateY(-2px)}
.itemCard.active{outline:2px solid var(--accent);box-shadow:0 0 0 4px rgba(73,217,145,.15)}
.itemRow{display:flex;align-items:center;gap:10px}
.swatch{width:28px;height:28px;border-radius:50%;border:1px solid #2b3a52}
#escMenu .panel{min-width:280px;text-align:center}

/* Joystick mobile */
#joy{position:fixed;left:18px;bottom:18px;width:120px;height:120px;border-radius:50%;background:#0f172a99;border:1px solid #1f2937;display:none;place-items:center;z-index:6}
#joy i{width:64px;height:64px;border-radius:50%;background:#1f2a3c;border:1px solid #2b3a52}

/* HUD inferior (HP/XP + botão de skill) */
#hudBottom{
  position:fixed; left:50%; bottom:14px; transform:translateX(-50%);
  display:flex; align-items:center; gap:12px; z-index:6;
}
#hudBottom.collapsed .hud-bars{display:none}
.btn-mini{
  pointer-events:auto; cursor:pointer; user-select:none;
  background:#0f172a; color:#e6f1ff; border:1px solid #1f2937;
  border-radius:999px; padding:6px 8px; font-weight:800; letter-spacing:.3px;
  box-shadow:0 8px 24px rgba(0,0,0,.35);
}
.hud-panel{background:var(--card); border:1px solid #1f2937; border-radius:16px; box-shadow:0 12px 40px var(--shadow); padding:10px 12px;}
.hud-bars{display:flex; align-items:center; gap:10px;}
.hbar{width:260px; height:16px; background:#111827; border:1px solid #1f2937; border-radius:999px; overflow:hidden;}
.hbar i.fill{display:block; height:100%; width:0; transition:width .15s linear;}
.hbar.hp i.fill{background:linear-gradient(90deg,#ff8aa1,var(--hp));}
.hbar.xp i.fill{background:linear-gradient(90deg,#7cc2ff,var(--xp));}
.num{font-weight:800; color:#e5e7eb; text-shadow:0 2px 12px rgba(0,0,0,.35)}

/* Botão circular da skill (cooldown em anel) */
.skill-btn{
  position:relative; width:76px; height:76px; border-radius:50%;
  border:1px solid #1f2937; background:#0e1622; color:#e6f1ff; font-weight:900;
  box-shadow:0 12px 40px rgba(0,0,0,.35); cursor:pointer;
}
.skill-btn .key{position:absolute; bottom:6px; right:6px; font-size:12px; opacity:.8}
.skill-btn::after{
  content:""; position:absolute; inset:-3px; border-radius:50%;
  background:conic-gradient(var(--accent) calc(var(--cd,0)*1%), rgba(255,255,255,.15) 0);
  -webkit-mask:radial-gradient(circle 30px at 50% 50%, transparent 55%, #000 56%);
          mask:radial-gradient(circle 30px at 50% 50%, transparent 55%, #000 56%);
  pointer-events:none;
}
.skill-btn[disabled]{filter:grayscale(1) opacity(.6); cursor:not-allowed}

/* Minimap/coord label (coords embaixo do mini-map que está no canvas) */
#coordsBox{
  position:fixed; right:12px; top:12px; transform:translateY(100%);
  color:#e5e7eb; font-weight:700; text-shadow:0 2px 8px rgba(0,0,0,.45); z-index:5;
}

/* Menu herói (parallax) */
.menu-hero{place-items:center}
.menu-hero .hero-bg{position:absolute; inset:0; overflow:hidden; z-index:0}
.menu-hero .sky{
  position:absolute; inset:0;
  background:linear-gradient(#1b2a41 0%, #0b0f14 70%);
  animation:skyPulse 12s ease-in-out infinite;
}
@keyframes skyPulse{0%,100%{filter:saturate(110%) brightness(1)} 50%{filter:saturate(130%) brightness(1.08)}}
.menu-hero .clouds{position:absolute; left:0; top:0; right:0; height:40%}
.menu-hero .clouds i{
  position:absolute; top:var(--y); left:var(--x); width:200px; height:80px;
  background:
    radial-gradient(closest-side,#ffffff99 98%,transparent) 20px 40px/60px 60px no-repeat,
    radial-gradient(closest-side,#ffffffaa 98%,transparent) 70px 30px/80px 80px no-repeat,
    radial-gradient(closest-side,#ffffff88 98%,transparent) 120px 45px/70px 70px no-repeat;
  filter:blur(0.6px); opacity:.75; border-radius:40px; transform:scale(var(--s,1));
  animation:cloudFly var(--t,50s) linear infinite;
}
@keyframes cloudFly{from{transform:translateX(-10vw) scale(var(--s,1))} to{transform:translateX(120vw) scale(var(--s,1))}}
.menu-hero .mountains{position:absolute; left:0; right:0; bottom:140px; height:240px; transform:translateY(10px); filter:drop-shadow(0 8px 12px rgba(0,0,0,.35))}
.menu-hero .hills{position:absolute; left:0; right:0; bottom:90px; height:200px; filter:drop-shadow(0 10px 18px rgba(0,0,0,.45))}
.menu-hero .hero-panel{
  position:relative; z-index:1; background:linear-gradient(180deg, rgba(17,24,39,.85), rgba(17,24,39,.7));
  border:1px solid #1f2937; border-radius:24px; padding:26px 26px 22px; width:min(900px,92vw);
  box-shadow:0 26px 80px rgba(0,0,0,.5); backdrop-filter:blur(4px);
}
.menu-hero .logo{margin:0 0 6px; line-height:.9; text-align:left}
.menu-hero .logo-top{
  display:block; font-size:clamp(28px,4vw,46px); font-weight:900; letter-spacing:4px;
  color:#9ae6ff; text-shadow:0 2px 0 #0e2132, 0 6px 18px rgba(0,0,0,.6);
}
.menu-hero .logo-bottom{
  display:block; font-size:clamp(34px,5.6vw,64px); font-weight:900; letter-spacing:6px; color:#ffd166;
  text-shadow:0 2px 0 #3a2d12, 0 10px 24px rgba(0,0,0,.6); -webkit-text-stroke:2px #2b1c0a;
}
.menu-hero .tag{margin:4px 0 14px; color:#cbd5e1}
.menu-hero .menu-field{margin:10px 0 16px}
.menu-hero .menu-field label{display:block; font-weight:800; margin-bottom:6px}
.menu-hero .menu-field input{
  width:100%; padding:12px 14px; border-radius:12px; outline:none;
  border:1px solid #1f2937; background:#0e1622; color:#e6f1ff; box-shadow:inset 0 2px 8px rgba(0,0,0,.25);
}
.menu-hero .menu-list{display:flex; flex-wrap:wrap; gap:10px; margin:0 0 16px}
.menu-hero .btn{pointer-events:auto; cursor:pointer; border:none; font-weight:900; letter-spacing:.3px}
.menu-hero .btn.pill{padding:12px 16px; border-radius:999px; background:#1a2a3f; color:#e6f1ff; border:1px solid #20344e; box-shadow:0 12px 34px rgba(0,0,0,.35)}
.menu-hero .btn.pill:hover{filter:brightness(1.1)}
.menu-hero .btn.ghost{padding:10px 14px; border-radius:14px; background:#0f172a; color:#e6f1ff; border:1px solid #1f2937}
.menu-hero .quick .itemCard{background:#0e1622cc; border:1px solid #223047}
@media (max-width:720px){
  .menu-hero .logo-top{letter-spacing:3px}
  .menu-hero .logo-bottom{letter-spacing:4px}
  .menu-hero .mountains{bottom:130px}
  .menu-hero .hills{bottom:84px}
}

/* ===== Level-up cards – grandes ===== */
#choices{position:fixed; inset:0; display:none; align-items:center; justify-content:center; z-index:10; background:rgba(2,6,12,.65); backdrop-filter:blur(6px)}
.choiceWrap{display:grid; grid-template-columns:repeat(auto-fit,minmax(320px,1fr)); gap:18px; width:min(1100px,92vw)}
.card{
  position:relative; overflow:hidden;
  background:linear-gradient(180deg,#0f172acc,#0b1020cc);
  border:1px solid #213047; border-radius:22px; padding:18px 18px 16px;
  cursor:pointer; transition:transform .08s ease, box-shadow .12s ease, border-color .12s ease;
  box-shadow:0 18px 50px rgba(0,0,0,.45), inset 0 1px 0 rgba(255,255,255,.04);
  min-height:150px; display:flex; align-items:center;
}
.card:hover{transform:translateY(-2px); box-shadow:0 24px 64px rgba(0,0,0,.55)}
.card:active{transform:translateY(0) scale(.995)}
.card .cardInner{width:100%}
.card .cardHeader{display:flex; align-items:center; justify-content:space-between; margin-bottom:8px}
.card h3{margin:0; font-size:20px; letter-spacing:.2px}
.card p{margin:0; color:#9fb0c9; font-size:15px; line-height:1.35}

/* badge “LENDÁRIA” (renderizada no HTML) */
.card .badge{
  display:inline-block; font-size:12px; font-weight:900; letter-spacing:.6px; color:#1b1405;
  background:linear-gradient(180deg,#ffd257,#f6b21d); padding:4px 8px; border-radius:999px;
  border:1px solid #7a5309; box-shadow:0 2px 8px rgba(0,0,0,.3), inset 0 1px 0 rgba(255,255,255,.4);
}

/* Lendária – efeito estável na borda */
.card.legend{
  border-color:#f5c542;
  background:linear-gradient(180deg,#121a2e,#0d1526);
  box-shadow:
    0 0 0 2px rgba(245,197,66,.18) inset,
    0 18px 70px rgba(245,197,66,.12),
    0 24px 80px rgba(0,0,0,.55),
    0 0 24px rgba(245,197,66,.18);
  min-height:170px;
  animation:legendPulse 2.4s ease-in-out infinite;
}
.card.legend::after{
  content:""; position:absolute; inset:-1px; border-radius:inherit; padding:2px;
  background:conic-gradient(from var(--a,0deg), rgba(255,214,96,0) 0%, rgba(255,214,96,.35) 12%, rgba(255,214,96,0) 18%, rgba(255,214,96,0) 100%) border-box;
  -webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite:xor; mask-composite:exclude;
  will-change:transform; backface-visibility:hidden; animation:sweep 3.6s linear infinite; pointer-events:none;
}
@keyframes legendPulse{
  0%,100%{box-shadow:0 0 0 2px rgba(245,197,66,.18) inset, 0 18px 70px rgba(245,197,66,.12), 0 24px 80px rgba(0,0,0,.55), 0 0 24px rgba(245,197,66,.18)}
  50%{box-shadow:0 0 0 2px rgba(245,197,66,.26) inset, 0 18px 70px rgba(245,197,66,.18), 0 24px 80px rgba(0,0,0,.55), 0 0 38px rgba(245,197,66,.28)}
}
@keyframes sweep{to{--a:360deg}}
